<!DOCTYPE html>
<html>
  <head>
    <title>OpenCV Test</title>
  </head>
  <body>
    <div id="status">Testing OpenCV loading...</div>
    <script type="module">
      console.log("Starting OpenCV test...");

      try {
        // Test direct import
        import("opencv-ts")
          .then((cv) => {
            console.log("OpenCV import successful:", cv);
            console.log("cv.default:", cv.default);
            console.log("cv.Mat:", cv.default?.Mat);

            document.getElementById("status").innerHTML = `
                    <h3>OpenCV Import Results:</h3>
                    <p>Import successful: ${!!cv}</p>
                    <p>Default export: ${!!cv.default}</p>
                    <p>Mat available: ${!!cv.default?.Mat}</p>
                    <p>CV object: ${JSON.stringify(
                      Object.keys(cv.default || {})
                    )}</p>
                `;
          })
          .catch((error) => {
            console.error("OpenCV import failed:", error);
            document.getElementById("status").innerHTML = `
                    <h3>OpenCV Import Failed:</h3>
                    <p>Error: ${error.message}</p>
                `;
          });
      } catch (error) {
        console.error("Error during test:", error);
        document.getElementById("status").innerHTML = `
                <h3>Test Error:</h3>
                <p>Error: ${error.message}</p>
            `;
      }
    </script>
  </body>
</html>
